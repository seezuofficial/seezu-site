<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SEEZU Chat</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family: Arial, sans-serif;
  background:#ffe6ef;
  text-align:center;
}
h1{
  color:#ff4f8b;
  margin-top:20px;
}
#girl{
  width:160px;
  border-radius:20px;
  margin:10px auto;
  display:block;
}
.card{
  background:#fff;
  margin:20px;
  padding:15px;
  border-radius:20px;
  box-shadow:0 5px 15px rgba(0,0,0,0.1);
}
#messages{
  max-height:300px;
  overflow-y:auto;
  text-align:left;
}
.msg{
  background:#ffb3cc;
  padding:8px 12px;
  border-radius:15px;
  margin:6px 0;
}
.input-row{
  display:flex;
  gap:10px;
  margin-top:10px;
}
input{
  flex:1;
  padding:12px;
  border-radius:20px;
  border:1px solid #ccc;
}
button{
  padding:12px 18px;
  border:none;
  border-radius:20px;
  background:#ff4f8b;
  color:#fff;
  cursor:pointer;
}
button:hover{opacity:0.9}
#logout{
  margin-top:15px;
  background:#ff6f9f;
}
</style>
</head>

<body>

<h1>SEEZU</h1>
<img id="girl" src="girl.jpg" alt="girl">

<div class="card" id="authBox">
  <h3>Login / Signup</h3>
  <input id="email" placeholder="Email"><br><br>
  <input id="password" type="password" placeholder="Password"><br><br>
  <button onclick="signup()">Create Account</button>
  <button onclick="login()">Login</button>
</div>

<div class="card" id="chatBox" style="display:none;">
  <h3>Live Chat</h3>
  <div id="messages"></div>

  <div class="input-row">
    <input id="msgInput" placeholder="Type message">
    <button onclick="sendMsg()">Send</button>
  </div>

  <button id="logout" onclick="logout()">Logout</button>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
import { getDatabase, ref, push, onChildAdded } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyBkHcQJJ4HXU4R23J2nBy1z4ElL3_Hr1D0",
  authDomain: "seezu-1066d.firebaseapp.com",
  databaseURL: "https://seezu-1066d-default-rtdb.firebaseio.com",
  projectId: "seezu-1066d",
  storageBucket: "seezu-1066d.appspot.com",
  messagingSenderId: "783067066542",
  appId: "1:783067066542:web:70c23adf7372b259a6fd3f"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getDatabase(app);

const authBox = document.getElementById("authBox");
const chatBox = document.getElementById("chatBox");

onAuthStateChanged(auth,user=>{
  if(user){
    authBox.style.display="none";
    chatBox.style.display="block";
  }else{
    authBox.style.display="block";
    chatBox.style.display="none";
  }
});

window.signup=()=>{
  createUserWithEmailAndPassword(auth,email.value,password.value)
  .catch(e=>alert(e.message));
}
window.login=()=>{
  signInWithEmailAndPassword(auth,email.value,password.value)
  .catch(e=>alert(e.message));
}
window.logout=()=>signOut(auth);

window.sendMsg=()=>{
  if(msgInput.value.trim()=="")return;
  push(ref(db,"messages"),{
    text:msgInput.value
  });
  msgInput.value="";
}

onChildAdded(ref(db,"messages"),snap=>{
  const d=snap.val();
  const div=document.createElement("div");
  div.className="msg";
  div.innerText=d.text;
  messages.appendChild(div);
  messages.scrollTop=messages.scrollHeight;
});
</script>

</body>
</html>
